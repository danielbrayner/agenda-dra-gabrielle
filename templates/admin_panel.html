<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel Administrativo - Dra. Gabrielle</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    >

    <style>
        /* Centraliza√ß√£o perfeita dos bot√µes no topo */
        .top-bar {
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 1rem;
        }

        .menu-central {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .top-bar {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .menu-central {
                justify-content: center;
            }
        }
    </style>
</head>

<body class="bg-light">

<div class="container py-4">

    <!-- TOPO -->
    <div class="top-bar mb-4">

        <h4 class="mb-0">üìã Painel da Dra. Gabrielle</h4>

        <!-- BOT√ïES CENTRAIS -->
        <div class="menu-central">
            <button class="btn btn-outline-primary btn-sm"
                    onclick="mostrarSecao('consultas')">
                Consultas agendadas
            </button>

            <button class="btn btn-outline-success btn-sm"
                    onclick="mostrarSecao('horarios')">
                Hor√°rios livres
            </button>

            <button class="btn btn-outline-secondary btn-sm"
                    onclick="mostrarSecao('novo')">
                Novo hor√°rio
            </button>
        </div>

        <a href="/admin/logout" class="btn btn-outline-danger btn-sm">
            Sair
        </a>

    </div>

    <!-- CONSULTAS AGENDADAS -->
    <div id="consultas" class="card mb-4 secao">
        <div class="card-header bg-primary text-white">
            Consultas agendadas
        </div>
        <div class="card-body table-responsive">

            {% if consultas %}
            <table class="table table-striped align-middle">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Hor√°rio</th>
                        <th>Paciente</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in consultas %}
                    <tr>
                        <td>{{ c.data }}</td>
                        <td>{{ c.horario }}</td>
                        <td>{{ c.nome_paciente }}</td>
                        <td class="text-end">
                            <a href="/admin/excluir/{{ c.id }}"
                               class="btn btn-sm btn-danger"
                               onclick="return confirm('Deseja cancelar esta consulta?')">
                                Cancelar
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted mb-0">Nenhuma consulta agendada.</p>
            {% endif %}

        </div>
    </div>

    <!-- HOR√ÅRIOS LIVRES -->
    <div id="horarios" class="card mb-4 secao d-none">
        <div class="card-header bg-success text-white">
            Hor√°rios livres
        </div>
        <div class="card-body table-responsive">

            {% if horarios_livres %}
            <table class="table table-striped align-middle">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Hor√°rio</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for h in horarios_livres %}
                    <tr>
                        <td>{{ h.data }}</td>
                        <td>{{ h.horario }}</td>
                        <td class="text-end">
                            <a href="/admin/excluir-horario/{{ h.id }}"
                               class="btn btn-sm btn-outline-danger"
                               onclick="return confirm('Excluir este hor√°rio?')">
                                Excluir
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted mb-0">Nenhum hor√°rio livre cadastrado.</p>
            {% endif %}

        </div>
    </div>

    <!-- NOVO HOR√ÅRIO -->
    <div id="novo" class="card secao d-none">
        <div class="card-header">
            ‚ûï Adicionar novo hor√°rio
        </div>
        <div class="card-body">

            <form method="POST" action="/admin/adicionar-horario">
                <div class="row g-3">

                    <div class="col-md-5">
                        <label class="form-label">Data</label>
                        <input type="date" name="data" class="form-control" required>
                    </div>

                    <div class="col-md-5">
                        <label class="form-label">Hor√°rio</label>
                        <input type="time" name="horario" class="form-control" required>
                    </div>

                    <div class="col-md-2 d-grid">
                        <button class="btn btn-primary">
                            Adicionar
                        </button>
                    </div>

                </div>
            </form>

        </div>
    </div>

</div>

<!-- SCRIPT -->
<script>
    function mostrarSecao(id) {
        document.querySelectorAll(".secao").forEach(secao => {
            secao.classList.add("d-none");
        });

        document.getElementById(id).classList.remove("d-none");
    }
</script>

</body>
</html>
